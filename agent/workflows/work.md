---
description: タスクを自然言語で指定し、適切なワークフローを自動選択して実行するメタワークフロー
---

# /work - メタワークフロー

> [!TIP]
> **目標: 3コマンド → 1コマンド**
> `/checkin` → `/work "タスク"` → `/checkout`

---

## 使用方法

```
/work "機能Xを実装したい"
/work "ログインのバグを直して"
/work "パフォーマンス改善"
```

---

## プロセス

### Step 1: タスク分析

ユーザーの意図を分析し、適切なワークフローを判定:

| キーワード | 選択されるワークフロー |
|-----------|----------------------|
| 実装、追加、新機能 | `/new-feature` |
| バグ、修正、直して | `/bug-fix` |
| リファクタ、整理、改善 | `/refactor` |
| テスト、検証 | `/test` + `/fbl` |
| デプロイ、リリース | `/deploy` |
| レビュー、確認 | `/debate` |
| マイグレーション | `/db-migrate` |
| 不明 | ユーザーに確認 |

---

### Step 2: 透明性の確保

選択したワークフローを**実行前に表示**:

```markdown
📋 タスク分析結果

**入力**: "ログインのバグを直して"
**判定**: バグ修正タスク

🔧 実行予定のワークフロー:
1. `/bug-fix` - バグ修正ワークフロー

続行しますか？ (Y/n)
```

> [!IMPORTANT]
> **透明性ルール**: 何が実行されるか必ず事前に表示する

---

### Step 3: ワークフロー実行

承認後、選択されたワークフローを実行。

複数ワークフローが必要な場合は**連鎖実行**:

```
/work "機能を実装してテストも書いて"
  → /new-feature (実装)
  → /test (テスト作成)
  → /fbl (検証ループ)
```

---

### Step 4: 完了報告

```markdown
✅ /work 完了

**実行したワークフロー**:
- [x] /bug-fix (完了)

**成果物**:
- 修正ファイル: `src/auth/login.ts`
- テスト: 全パス

**次のアクション**:
- `/checkout` でセッション終了
- または次の `/work "タスク"` を指定
```

---

## ワークフロー連鎖パターン

よくあるタスクに対する自動連鎖:

| タスクパターン | 連鎖ワークフロー |
|---------------|-----------------|
| 機能実装（フル） | `/spec` → `/new-feature` → `/test` |
| バグ修正（フル） | `/bug-fix` → `/fbl` |
| 設計レビュー | `/spec` → `/debate deep` |
| リリース準備 | `/test` → `/fbl` → `/deploy` |

---

## オプション

| オプション | 効果 |
|-----------|------|
| `/work --auto` | 確認なしで自動実行（上級者向け） |
| `/work --dry-run` | 実行せずに計画のみ表示 |
| `/work --chain` | 複数ワークフロー連鎖を強制 |

---

## 将来拡張（Level 2）

```markdown
# Level 2: auto-checkin/checkout

/work "タスク"
  → 自動で /checkin 相当を実行
  → ワークフロー実行
  → 自動で /checkout 相当を実行

# 結果: 1コマンドで完結
```

---

> [!NOTE]
> `/work` は「何をしたいか」を伝えるだけ。
> ワークフロー選択はAIが判断し、透明性を保って実行する。
