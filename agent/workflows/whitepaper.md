---
description: ディープディベートでホワイトペーパーを共創し、ロードマップ→マイルストーン→タスクまで分解する戦略型ワークフロー
---

# /whitepaper - Whitepaper-Driven Development

**Concept**: プロジェクトの**北極星ドキュメント**をユーザーとのディープディベートで共創し、
実行可能なタスクまで落とし込む。`/vision-os`（スプリント型）と異なり、
長期戦略を文書化してコンテキスト回帰可能にする。

## Cross-Reference

```
/whitepaper → WHITEPAPER.md + ROADMAP.md + /gen-dev
/xx-dev (生成コマンド) → WHITEPAPER → ROADMAP → /go "タスク"
/vision-os とは排他: vision-os=曖昧→即実装、whitepaper=戦略→計画→段階実装
```

---

## 使用方法

```bash
/whitepaper "プロジェクトのビジョン・概要"
# Example: /whitepaper "AI思考のライフサイクル管理プラットフォーム"
```

---

## Phase 1: Deep Interview（Jensen式ヒアリング）

**目的**: プロジェクトの本質を引き出す。表面的な要望ではなく、根底のビジョンを理解する。

### 質問フレームワーク（最低3ラウンド）

#### Round 1: Why（存在意義）
```markdown
1. このプロジェクトは「なぜ」存在するのか？（既存の解決策では不十分な理由）
2. 3年後、このプロジェクトが大成功したら世界はどう変わっているか？
3. 競合との本質的な違いは何か？（機能差ではなく哲学の違い）
```

#### Round 2: What（構造）
```markdown
1. コアとなるアーキテクチャは？（3-Layer、マイクロサービス等）
2. ユーザーにとっての「魔法の瞬間」はどこか？
3. 技術スタックの選定基準は？（品質 > 効率 > 速度 > 軽量 等）
```

#### Round 3: How（実行戦略）
```markdown
1. 最初の顧客は誰か？（内販 vs 外販、B2B vs B2C）
2. 収益モデルは？（Usage / Subscription / Outcome-based）
3. 「これだけは妥協しない」設計原則は？
```

> [!IMPORTANT]
> ユーザーの回答が曖昧な場合は**深掘り質問**を追加。
> 理解度100%になるまでPhase 2に進まない。

---

## Phase 2: Deep Debate（ホワイトペーパー精錬）

**目的**: ユーザーとのインタビュー結果をWHITEPAPER.mdに構造化し、ディベートで磨き上げる。

### Step 2-1: WHITEPAPER.md ドラフト作成

インタビュー結果を以下の構造で文書化:

```markdown
# [Project Name] Whitepaper

## 1. [Project]とは何か
## 2. アーキテクチャ
## 3. コア機能・ノード一覧
## 4. 設計原則（Priority Weights等）
## 5. 実行パターン
## 6. 収益モデル / ビジネス戦略
## 7. 技術スタック
## 8. ロードマップ概要（戦闘力テーブル等）
```

### Step 2-2: ユーザーレビュー + ディベートループ

```
ドラフト → ユーザーレビュー → フィードバック反映
    → /debate deep → 指摘反映 → ユーザー再レビュー
    → 合意するまで繰り返し（最低3ラウンド）
```

**ディベートチーム**:
- **Architect**: 技術的整合性・スケーラビリティ
- **Skeptic**: 甘い前提・見落としの指摘
- **Strategist**: ビジネス戦略・差別化の妥当性

> [!TIP]
> 標準的なホワイトペーパー完成には**約8ラウンド**かかる。
> ユーザーが「これでロック」と明言するまで続行。

> [!WARNING]
> **曖昧さ検出メカニズム**: ユーザーがAIの議論についていけなくなり、質問が出なくなった場合、
> 曖昧なホワイトペーパーが生成されるリスクがある。以下で防止:
> 1. 各ラウンド後に「理解度チェック」を実施（「ここまでの内容で違和感や疑問はありますか？」）
> 2. ユーザーの回答が「特にない」「大丈夫」等の短答が3連続 → **要注意**: 具体的な質問で深掘り
> 3. WHITEPAPER.md の各セクションに「あなた自身の言葉で」一文サマリーを書いてもらう
> 4. サマリーと本文に乖離がある → そのセクションを再議論

### Step 2-3: Whitepaper ロック

ユーザー承認後、WHITEPAPER.md のヘッダーにメタ情報を追記:

```markdown
> **最終更新**: [日時]（v[N] — ディープレビュー[M]件反映）
> **ディベート**: 全[X]ラウンド完走・戦略ロック済み
> **設計図完成度**: [Score]/100
> **次のアクション**: [最初のタスク]
```

**出力**: `WHITEPAPER.md`（プロジェクトルート）

---

## Phase 3: Roadmap Generation

**目的**: WHITEPAPER.md の戦略をマイルストーン + タスクに分解する。

### Step 3-1: マイルストーン定義

WHITEPAPER.md のロードマップ概要から、具体的なマイルストーンを設計。
**ROADMAP.md** と **MILESTONE.md** を別ファイルとして生成:

**ROADMAP.md** — 全体タイムライン + MS概要:
```markdown
## M[N]: [マイルストーン名]（戦闘力 X→Y）
概要: [このMSで達成すること]
完了条件: [検証可能条件]
タスク数: [N]件
```

**MILESTONE.md** — MS別の詳細タスク:
```markdown
## MS[N.M]: [サブマイルストーン名]
**完了条件**: [具体的な検証可能条件]

| # | タスク | 工数 | 依存 |
|---|-------|------|------|
| N.M.1 | [具体タスク] | 小/中/大 | — |
| N.M.2 | [具体タスク] | 小/中/大 | N.M.1 |
```

### Step 3-2: タイムライン作成

```markdown
## タイムライン

M1 (〜X週間): [概要]
M2 (〜X週間): [概要]
...
```

Mermaid gantt 図も生成。

### Step 3-3: ロードマップレビュー

`/debate quick` でレビュー:
- タスクの粒度は適切か？
- 依存関係に矛盾はないか？
- 完了条件は検証可能か？

**出力**: `ROADMAP.md` + `MILESTONE.md`（プロジェクトルート）

---

## Phase 4: Test Strategy（必須）

**目的**: プロジェクト全体のテスト戦略を早期に定義する。

WHITEPAPER.md に以下のセクションを**必須で**追加:

```markdown
## テスト戦略

### 品質ティア
| ティア | テスト種別 | 適用範囲 |
|-------|-----------|---------|
| ... | ... | ... |

### MS別テスト方針
| MS | テスト重点 | /test-evolve モード |
|----|-----------|-------------------|
| MS1 | unit中心 | quick |
| MS2 | integration | quick |
| MS[last] | 全Phase | full |
```

> [!IMPORTANT]
> テスト戦略セクションがないWHITEPAPER.mdはロック不可。
> ホワイトペーパー段階でテスト方針を定めることで、実装時のテスト品質を担保する。

---

## Phase 5: Dev Command Generation

**目的**: プロジェクト固有の `/xx-dev` コマンドを自動生成する。

```
プロジェクト名 → コマンド名自動決定 → /gen-dev 自動呼び出し
```

例:
- Ada → `/ada-dev`
- Velie → `/vel-dev`
- DiscordBuddy → `/db-dev`

**出力**: `[project]/.agent/workflows/xx-dev.md`

---

## MS品質ゲート（/test-evolve 統合）

マイルストーン完了時に `/test-evolve full` を自動実行:

| チェック | 合格条件 |
|---------|---------|
| Test Quality Score | **≥ A (85/100)** |
| ミュータント殺傷率 | **≥ 90%** |
| Critical ギャップ | = 0 |

> [!CAUTION]
> **最厳格ゲート**: ホワイトペーパーレベルの品質を担保するため、
> 通常の `/verify` よりも厳しい基準を適用。不合格 → テスト改善 → 再検証 → 合格まで次のMSに進まない。

---

## 完了条件

| 成果物 | 状態 |
|--------|------|
| WHITEPAPER.md | ディベート完走・テスト戦略セクション含む・ユーザーロック済み |
| ROADMAP.md | MS概要 + タイムライン定義完了・debate quick通過 |
| MILESTONE.md | MS別詳細タスク定義完了 |
| /xx-dev.md | プロジェクト固有コマンド生成完了 |

---

## エラー時

| 状況 | 対応 |
|------|------|
| ユーザーがビジョンを明確化できない | Round追加。5ラウンド超えても不明瞭→PAUSE |
| debate が3回Block | 問題箇所を特定→部分修正→再debate |
| ロードマップのタスク粒度が大きすぎる | サブタスクに分解（1タスク ≤ 1日目安） |
