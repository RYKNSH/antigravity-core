# アーキテクチャ決定記録（Architecture Decision Records）

> **重要な設計決定はすべてここに記録する。**
> 将来の開発者（と未来の自分）が「なぜこうなっているか」を理解できるように。

---

## ADRテンプレート

```markdown
## ADR-XXX: [決定のタイトル]

### ステータス
[提案中 | 承認済み | 廃止 | 置換（by ADR-YYY）]

### コンテキスト
[この決定が必要になった背景・状況を説明]

### 検討した選択肢

#### 選択肢1: [名称]
- **概要**: 
- **メリット**: 
- **デメリット**: 

#### 選択肢2: [名称]
- **概要**: 
- **メリット**: 
- **デメリット**: 

### 決定
[選択した選択肢とその理由]

### 結果
[この決定によって生じる影響・結果]

### 日付
[YYYY-MM-DD]

### 決定者
[決定に関わった人]
```

---

## 決定記録

### ADR-001: Monorepo構成の採用

#### ステータス
承認済み

#### コンテキスト
プロジェクトには複数のアプリケーション（Web、API）と共有パッケージ（types、utils）が含まれる。
コードの一貫性と依存関係の管理を効率化する必要がある。

#### 検討した選択肢

##### 選択肢1: Monorepo（Turborepo）
- **概要**: 単一リポジトリで全コードを管理
- **メリット**: 
  - 依存関係の一元管理
  - 共有コードの更新が即座に反映
  - CIの効率化（影響範囲のみビルド）
- **デメリット**: 
  - 初期設定の複雑さ
  - リポジトリサイズの増大

##### 選択肢2: Polyrepo（複数リポジトリ）
- **概要**: アプリケーションごとに別リポジトリ
- **メリット**: 
  - シンプルな構成
  - チーム間の独立性
- **デメリット**: 
  - 依存関係の更新が煩雑
  - 共有コードの同期が困難

#### 決定
**選択肢1: Monorepo（Turborepo）** を採用。

理由：
1. 共有パッケージ（types、llm-client等）の更新を即座に反映できる
2. First Principlesに基づき、シンプルな依存関係管理を実現
3. 過去プロジェクト（Discord Buddy、CrewAI JP）での成功実績

#### 結果
- Turborepoによるタスク並列実行の恩恵
- 型定義の一元管理によるバグ削減
- デプロイパイプラインの設計が必要

#### 日付
2026-01-20

---

### ADR-002: AI統合三層構造の採用

#### ステータス
承認済み

#### コンテキスト
AIエージェント（Antigravity等）との効果的な協働のため、
スキル、ワークフロー、MCP Serverの統合方法を決定する必要がある。

#### 検討した選択肢

##### 選択肢1: 三層構造（Skills / Workflows / MCP）
- **概要**: 
  - Skills: 専門スキルの定義
  - Workflows: 定型作業の自動化
  - MCP: 外部サービス統合
- **メリット**: 
  - 関心の分離が明確
  - 拡張性が高い
- **デメリット**: 
  - ディレクトリ構造が複雑

##### 選択肢2: 単一設定ファイル
- **概要**: すべてのAI設定を1ファイルに集約
- **メリット**: 
  - シンプル
- **デメリット**: 
  - スケールしない
  - 可読性低下

#### 決定
**選択肢1: 三層構造** を採用。

理由：
1. 各レイヤーが独立して進化可能
2. チームメンバーが担当レイヤーに集中できる
3. First Principlesに基づく関心の分離

#### 結果
- `.agent/` ディレクトリに構造化されたAI統合レイヤー
- 新機能追加時は適切なレイヤーに配置

#### 日付
2026-01-20
