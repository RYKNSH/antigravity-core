# 「公開する」の落とし穴。


つくったものを世に出すって、
すごくハードルが下がりましたよね。

AIにお願いすれば、コードが書ける。
ボタンひとつで公開できる。
GitHubに上げれば、世界中から見てもらえる。

でもそのとき、
ひとつだけ忘れがちなことがあるんです。

「見せていいもの」と「見せちゃいけないもの」が、
混ざったまま出してないか、ということ。



先週、ぼくに起きた話をします。

AIと一緒につくった開発環境を、
オープンソースとして公開しようとしたんです。

オープンソースっていうのは、
「ぼくのつくったもの、自由に使っていいよ」
ということです。レシピを公開するようなもの。

もともとこの環境は、完全にぼく専用でつくったものでした。
自分しか使わないから、鍵もパスワードも、
ぜんぶ同じ場所に放り込んでいた。

それを「みんなの役に立つかも」と思って
オープンにしようとした直前、
設定ファイルのなかに、
GitHubの認証トークンが入っていることに気づいた。

認証トークン。
これ、家の合鍵みたいなものです。

これがあれば、ぼくのふりをして
コードを書き換えたり、
非公開のプロジェクトを覗いたりできてしまう。

しかも厄介なことに、
過去の変更履歴にも残っていた。

つまり、公開ボタンを押した瞬間、
自分用の合鍵がネットに晒されるところだった。



これ、ぼくが不注意だっただけでしょうか。

そうは思わないんです。

AIと一緒にモノをつくっていると、
「設定ファイル」というものが自然に生まれます。

APIキー。これはサービスの入場チケットみたいなもの。
トークン。本人確認の証明書みたいなもの。
パスワード。言うまでもなく、鍵。

AIに「動くようにして」とお願いすると、
こういうものを設定ファイルに書き込みます。

そしてそのファイルは、
プロジェクトの一部として、ふつうに存在している。

つくっているときは、何も問題ない。
発表するときに、爆弾になる。



ぼくがやったことは、3つです。

まず、合鍵を無効にした。
漏れていたトークンを「もう使えません」と
GitHub側に申請して、新しいものに取り替えた。

次に、過去の痕跡をぜんぶ消した。
変更履歴のなかに残っていた合鍵の情報を、
すべて除去した。

最後に、仕組みを変えた。
「見せていいもの」と「見せちゃいけないもの」を、
物理的に別の場所に分けた。

レシピは公開する。
でも自分の店の鍵は、別の金庫にしまう。

こうしておけば、うっかり公開ボタンを押しても、
鍵は絶対に外に出ない。



ここで伝えたいのは、
「気をつけよう」という話じゃないんです。

「気をつける」だけでは、人間は必ずミスをする。
だから、ミスしても大丈夫な構造をつくる、ということ。

秘密の情報と公開する情報が同じ場所にあるかぎり、
いつか間違えます。これは確率の問題。

でも、最初から別の場所に置いておけば、
間違える余地がなくなる。

ぼくはこれを「構造で守る」と呼んでいます。
意志の力で守るのではなく、
仕組みで守る。



もし今、AIと一緒に何かをつくっていて、
いつか人に見せたい、公開したい、と思っているなら。

ひとつだけ、やってほしいことがあります。

プロジェクトのフォルダを開いて、
.envとかconfigとか、
そういう名前のファイルが入っていないか、見てみてください。

中身に、長い英数字の羅列がないか。
それ、たぶん鍵です。

その鍵を、プロジェクトの外に出してください。

それだけで、
あなたの作品は安全に世に出せるようになります。



つくることのハードルは、もう十分下がった。

次に下げるべきは、
「安全に公開するハードル」なんだと思います。

その第一歩は、
見せていいものと、見せちゃいけないものを、
分けること。

それだけで、いいんです。

