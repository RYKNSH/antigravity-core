# 安全装置の話。


「守ってくれている」と思っているものが、
実は何も守っていないこと、ありませんか。


これ、けっこう怖い話なんです。



ぼくは、AIと一緒に開発をしています。

コードもデータも、持ち運べる外付けドライブに入っている。
カフェでも自宅でも、どこでも同じ環境で仕事ができる。

便利なんですよ。

ただ、外付けドライブには弱点がある。
ときどき、操作が固まるんです。

ファイルを消す。
普通なら一瞬で終わる。

でも、たまに返ってこない。
1分経っても、5分経っても、終わらない。

その間、ターミナルという操作画面が凍りつく。
何もできない。ただ、待つしかない。



こういうとき、「タイムアウト」という仕組みを使います。

10秒待って、返事がなかったら、強制的に止める。
レストランの予約みたいなものです。
時間までに来なかったら、席はキャンセル。

ぼくも、その仕組みを導入した。

macOSには標準のタイムアウトコマンドがないので、
代わりにPerlという言語の「アラーム」機能を使った。

10秒のタイマーをセットして、
時間が来たら「もう止めていいよ」という信号を送る。

これで安心だと思いました。



先日、大がかりなファイル整理をしていたときのこと。

古いフォルダを削除するコマンドを実行した。
もちろん、10秒のタイマー付きで。

でも、固まった。

10秒過ぎても止まらない。
20秒、30秒、1分。

止まらないんですよ。

結局、1時間20分かかった。
その間、ぼくは何もできなかった。

10秒で止まるはずの安全装置が、
まったく効かなかった。



原因を調べてみて、背筋が冷たくなりました。

コンピュータの中には、
「絶対に邪魔をしてはいけない」状態があるんです。

ディスクに何かを書き込んでいる最中とか、
ハードウェアの応答を待っている最中とか。

このとき、プログラムは特別な眠りに入る。
エンジニアはこれを「D state」と呼びます。

Deep sleepのDです。

この状態にあるプログラムは、
どんな信号も受け取れない。

「もう止めて」も、
「お願いだから終わって」も、
「頼むから消えてくれ」も。

全部、無視される。

ぼくが10秒で止まると信じていた安全装置は、
この「深い眠り」の前では、ただの飾りだった。



ここで、ちょっと怖いことに気づきます。

安全装置がないのと、
安全装置があるのに効かないのとでは、
後者のほうがずっと危険なんですよ。

安全装置がなければ、慎重になる。
「壊れるかもしれない」と思うから、用心する。

でも安全装置があると、油断する。
「守られている」と思うから、大胆になる。

そして、いちばん大事なときに裏切られる。

これ、車のシートベルトが切れてるのに
ランプだけは消えてる状態と同じなんですよね。



そこで、ぼくはもう一度、AIチームと議論しました。

「ひとつの安全装置で守ろうとするのが、そもそも間違いだ」

彼らの結論は明快だった。

まず、通常のタイマーで止めてみる。これが第一層。
たいていの問題は、ここで解決する。

それが効かなかったら、次の手を打つ。
プログラムを裏側で動かしておいて、
外から監視して、動かなくなったら強制終了する。
これが第二層。

それすら効かないほど深刻なら、
ターミナル自体を使わない。
別のルートでファイルを操作する。
これが第三層。

そしてすべてが失敗したら、
「次に来たとき、最初にやること」として記録しておく。
次回のセッション開始時に、自動でもう一度試す。

つまり、「守れなかった」で終わらせない。
「いつか必ず守り切る」という設計にした。



これ、人生にも当てはまると思いませんか。

ぼくらはよく、ひとつの対策で安心してしまう。

貯金があるから大丈夫。
保険に入ってるから大丈夫。
バックアップを取ってるから大丈夫。

でも、本当に大丈夫？

その貯金は、どういう事態で足りなくなるか、考えたことある？
その保険は、どういう場合に適用されないか、読んだことある？

「守られている」と思い込むことほど、
危険なことはないんですよね。



本当の堅牢さというのは、
ひとつの完璧な壁じゃなくて、
いくつもの不完全な壁を重ねることなんです。

ぼくはひとりで開発しています。

でも、AIチームが一緒に考えてくれる。
ひとりの視点では見落とすことを、
彼らが違う角度から照らしてくれる。

安全装置がひとつだけなら、それは賭けです。
安全装置が三つ重なったら、それは設計です。



もし今、
「ちゃんと対策してるのに、なぜか不安が消えない」
って感じているなら。

その直感、正しいかもしれません。

ひとつの対策で安心するのは、
「できること」をやってるだけで、
「守れること」とは、ちがうんです。

壁は、重ねるんです。


