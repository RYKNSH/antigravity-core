傷跡が、地図になる。


テストが通ったら、安心しますよね。

全部グリーン。エラーなし。
「よし、動いた」って。

ぼくもそうでした。

ただ、
その安心が、いちばん危ないんです。



先週のことです。

動画編集ツールの新機能を実装して、
テストも通した。ビルドも通した。
レビューもした。

完璧、のはずだった。

翌日、3つのバグが出てきた。

型の不一致。環境変数の参照ミス。
async関数のawait漏れ。

ぜんぶ、テストでは見つからなかったものです。

テストは「動くかどうか」を見ている。
でもコードには「動くけど、おかしい」という状態がある。

テストに通るバグ。
矛盾してるようだけど、現実なんです。



ここで考えたんです。

テストが通ったあとに何をすべきなのか、と。

普通、テストが通れば次に進みますよね。
でも「通った」は「正しい」じゃない。

体温計が36度を示しても、
頭が痛いなら何か起きてる。

数値は正常。でも身体は異常を訴えている。

テストって、体温計なんです。
測れるものは測れるけど、
測れないものは測れない。



じゃあ、測れないものをどうやって見つけるのか。

ぼくは、顕微鏡をつくることにした。

体温計の次に、顕微鏡。

コードの表面じゃなく、
細胞のレベルで覗き込む仕組みです。

型の穴はないか。
フロントとバックエンドの約束事は守られているか。
環境変数は定義されているか。
ログのない失敗ポイントはないか。

テストが見ない場所を、ひとつひとつ確認していく。

地味な作業です。
でも、ここにバグの温床がある。



ただ、この顕微鏡をつくっているときに、
もうひとつ気づいたことがあった。

見つけて、直して、終わり。
それだけじゃ足りないんです。

同じミスを、次もやるから。

async関数のawait漏れ。
先週直した。先々週も直した。
たぶん来週もやる。

同じ穴に何度も落ちる。
なぜかというと、穴の存在を「覚えてない」から。

いや、正確に言うと、
覚えてはいるんです。
具体的な場所としては。

「あのファイルの、あの行で、こう直した」

でもそれは、
地図の上のピンにすぎない。

ピンが増えても、
地形は見えないんですよ。



ここが核心です。

失敗を覚えるんじゃなく、
失敗から原則を抽出する。

「あのファイルでawait漏れがあった」は事実。

でもそこから抽出すべきは、
「非同期のデータ操作は、型システムが警告を出さないまま失敗する」
という原則なんです。

事実は1回限りだけど、
原則はどこにでも適用できる。

傷跡を覚えるんじゃなく、
傷跡から地形図をつくるんです。



ぼくはこれを、
AIパートナーと一緒に設計しました。

まず、顕微鏡でコードを覗く。
問題が見つかったら直す。

ここまでは普通です。

違うのは、そのあと。

直したあとに、3つの質問をするんです。

このミスは、他の場所でも起きるか。
なぜ見逃されたのか。
一文で防止ルールを書けるか。

この3つの問いに答えられたとき、
具体的な修正が、抽象的な原則に変わる。

ぼくたちはそれを「Principle」と呼んでいます。
直訳すると原理原則。
でも感覚的には「傷跡から描いた地図」です。



面白いのは、
この原則が育つということ。

最初は仮説なんです。
「たぶんこういうミスが多い」という予想。

でも次に検査するとき、
その予想をもとに重点的に見る。

見つかれば、原則は強化される。
見つからなければ、原則は薄れていく。

自然淘汰なんです。

正しい原則は残り、
的外れな原則は消えていく。

ぼくの経験が、
勝手に精製されていく。



これって、
人間の直感と同じ構造なんですよね。

ベテランの料理人が、
鍋を覗いただけで火加減がわかる。

あれは生まれつきの才能じゃない。

何千回も焦がして、
何千回も煮崩して、
その失敗から無意識に原則を抽出した結果です。

「このくらいの泡なら、あと30秒」

言語化できなくても、身体が知っている。

ぼくがやっているのは、
その「身体知」を文字にする作業です。

AIは身体を持たないから、
文字にしないと覚えられない。

でも文字にしたら、忘れない。
そしてセッションを超えて、プロジェクトを超えて引き継がれる。

人間の直感は一代限りだけど、
このシステムの原則は蓄積される。

ぼくが寝てる間も、そこにある。



もし今、
「なんで同じミスを繰り返すんだろう」
と感じているなら。

それ、記憶力の問題じゃないんです。
抽象化の問題なんです。

「あのとき、ああなった」を覚えても、
次は別の場所で同じことが起きる。

でも「なぜそうなるのか」を原則にしておけば、
場所が変わっても気づける。

傷跡は痛みの記録だけど、
原則は知恵の記録なんです。



ぼくはひとりで開発してます。

でもひとりの経験が、
原則として蓄積されて、
次のぼくを守ってくれる。

過去の失敗が、未来の検出器になる。

傷跡が、地図になる。

ひとりでも、
積み重なるんですよ。
